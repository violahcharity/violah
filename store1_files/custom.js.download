(function($,Drupal){Drupal.behaviors.tets={attach:function(){init();}};var initialized;var ButtonScrollToTop=null;var financialTableCurrentIndex='t1';function init(){if(!initialized){initialized=true;window.onscroll=function(){scrollFunction();};$('input,select').change(function(){initialized=false;});$('.pager__item a').on('click',function(){initialized=false;});addScrollToTopButton();convertYearsSelect();convertTagsSelect();convertCountrySelect();convertCategorieSelect();convertKeywordsSelect();setFinancialTableMobileView();}}
function addScrollToTopButton(){var scrollToTopElement='<button class="button-scroll-to-top" id="button-scroll-to-top" title="Retour ver les haut">';scrollToTopElement+='<svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12.642 17.345"><path fill="currentColor" d="M12.642 8.602L6.321 0 0 8.602h4.382v8.743H8.26V8.602h4.382z"/></svg>';scrollToTopElement+='</button>';var lang=($('html').attr('lang'));$('body').append(scrollToTopElement);ButtonScrollToTop=document.getElementById('button-scroll-to-top');$('.button-scroll-to-top').click(function(){$('html, body').animate({scrollTop:0},Math.min(2000,window.pageYOffset*.3));});if(lang==='fr'){$('.button-scroll-to-top').attr('title','Retour vers le haut');}else{$('.button-scroll-to-top').attr('title','Back to top');}}
function scrollFunction(){const breakPoint=window.innerHeight+window.innerHeight*.2;if(ButtonScrollToTop){if(document.body.scrollTop>breakPoint||document.documentElement.scrollTop>breakPoint){ButtonScrollToTop.style.display='block';}else{ButtonScrollToTop.style.display='none';}}}
function toggleFinancialTableHeadingStyle(targetId,allHeadingsSelector){$(allHeadingsSelector).each(function(){$(this).addClass('heading-unactive');});var targetSelector='#'+targetId;$(targetSelector).removeClass('heading-unactive');}
function hideAllFinancialTableColumns(){var allColumnsSelector='[class*="cell-download"]';$(allColumnsSelector).each(function(){$(this).hide();});}
function addClickListenerToFinancialTableHeadings(){var allHeadingsSelector='[class*="col-heading"]';$(allHeadingsSelector).each(function(){$(this).click(function(event){toggleFinancialTableHeadingStyle(event.target.id,allHeadingsSelector);showFinancialTableColumn(event.target.id);});});}
function showFinancialTableColumn(targetColumnId){hideAllFinancialTableColumns();var columnSelector='[class*="cell-'+targetColumnId+'"]';$(columnSelector).each(function(){$(this).slideToggle();});}
function setFinancialTableMobileView(){if(window.innerWidth<1024){showFinancialTableColumn(financialTableCurrentIndex);addClickListenerToFinancialTableHeadings();}}
function convertYearsSelect(){convertSelect('field_year_value');}
function convertTagsSelect(){convertSelect('field_publication_type_target_id');}
function convertCountrySelect(){convertSelect('field_tag_country_target_id');}
function convertCategorieSelect(){convertSelect('field_tag_categorie_target_id');}
function convertKeywordsSelect(){convertSelect('field_tag_keyword_target_id');}
function convertSelect(elmName){var selector='select[name="'+elmName+'"]';var selectorSelected=selector+' :selected';var scrollableListClass='scrollable-list-'+elmName;var selectedOptionClass='selected-option-'+elmName;var selectOptionsClass='select-options-'+elmName;$(selector).hide();appendPersonalizedSelect(selector,scrollableListClass,selectedOptionClass,selectOptionsClass,selectorSelected);addClickToOpenSelectDropDown(selectedOptionClass);addClickToSelectElements(selector,scrollableListClass,selectedOptionClass);$('.'+scrollableListClass).show();}
function appendPersonalizedSelect(selector,scrollableListClass,selectedOptionClass,selectOptionsClass,selectorSelected){$(selector).each(function(index,element){var icon='<div class="select-chevron"><svg class="fill-current inline-block h-6 w-6"'+'xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">'+'<path fill="#004e9f" d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/>'+'</svg></div>';var scrollableList='<div class="scrollable-list '+scrollableListClass+'">'+'<div class="selected-option '+selectedOptionClass+'"></div>'+'<ul class="select-options '+selectOptionsClass+'"></ul>'+icon+'</div>';$(this).parent().after().append(scrollableList);insertSelectOptions(element,selectorSelected,scrollableListClass);$('.'+scrollableListClass+':last').children('div.'+selectedOptionClass).text($(selectorSelected).eq(0).text());});}
function insertSelectOptions(element,selectorSelected,scrollableListClass){$(element).each(function(idx,elm){$('option',elm).each(function(id,el){if($(selectorSelected).text()!=el.text&&el.value){$('.'+scrollableListClass+' ul:last').append('<li>'+el.text+'</li>');}});$('.'+scrollableListClass+' ul').hide();});}
function addClickToOpenSelectDropDown(selectedOptionClass){$('.'+selectedOptionClass).on('click',function(){addBackdrop();$(this).next('ul').slideToggle(200);$(this).next('ul').addClass('dropdown-toggled');$('.'+selectedOptionClass).not(this).next('ul').hide();});}
function addBackdrop(){var backdrop='<div class="backdrop fixed inset-0"></div>';$('body').append(backdrop);$('.backdrop').on('click',function(){$('.dropdown-toggled').each(function(){$(this).slideUp(200);});$('.backdrop').hide();});}
function addClickToSelectElements(selector,scrollableListClass,selectedOptionClass){$('.'+scrollableListClass+' ul li').on('click',function(){var selectedLI=$(this).text();$(selector+' option').filter(function(){return $(this).html()===selectedLI;}).prop('selected','selected').change();$(this).parent().prev('.'+selectedOptionClass).text(selectedLI);$(this).parent('ul').hide();$('.backdrop').hide();});}})(jQuery,Drupal);